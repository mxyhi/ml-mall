import{_ as q,x as L,r as s,aq as k,O as A,p as N,F as $,b as m,s as O}from"./user-0aef1c91.js";/* empty css              */import{L as R}from"./index-3b436b11.js";import"./index-1aa94732.js";import"./index-517c6840.js";/* empty css              */import"./index-4969e190.js";import"./index-d4b43d7f.js";import{A as S}from"./index-ae2a0a77.js";import{N as U}from"./index-7f807b9d.js";import{g as w}from"./address-e6f50c1e.js";import"./use-tab-status-28223c81.js";import"./index-47ddee7f.js";import"./use-route-dd9e823b.js";import"./index-98a02491.js";const B={class:"container"},D={__name:"index",setup(V){const v=L(),a=s(null);v.query.orderInfo&&(a.value=JSON.parse(decodeURI(atob(v.query.orderInfo||"")||"")||"{}")),console.log(a.value);let n=1;const l=10;let r=0;const I=k(),_=s([]),d=s([]),i=s(null),b=(e,t)=>{console.log(e),I.push({path:"/edit-address",query:{addressInfo:btoa(encodeURI(JSON.stringify({..._.value[t]}))),orderInfo:v.query.orderInfo}})},g=s(!1),y=s(!1),h=async()=>{var t,u,c,p,f;const e=await w({page:n++,limit:l});if(console.log(e),console.table(e.data.list),e.code===1&&(r=e.data.count,console.log(e.data.list===null),g.value=!1,e.data.list!==null&&(_.value.push(...e.data.list||[]),d.value.push(...((u=(t=e.data.list)==null?void 0:t.map)==null?void 0:u.call(t,o=>({id:o.id,name:o.name,tel:o.phone,address:o.province.concat(o.city,o.town,o.street!=="null"?o.street:"",o.detail),isDefault:!!o.is_default})))||[]),i.value=(f=(p=(c=d.value).find)==null?void 0:p.call(c,o=>o.isDefault))==null?void 0:f.id,console.table(_.value),console.table(d.value))),console.log(n,parseInt(r/l)+1,r,n,l),n>parseInt(r/l)+1){y.value=!0;return}},x=e=>{a.value&&(console.log(e),console.log(i.value),I.replace({name:"createOrder",query:{orderInfo:btoa(encodeURI(JSON.stringify({...a.value,consignee_name:e.name,consignee_phone:e.tel,consignee_address:e.address,isDefault:e.isDefault})))}}))};return(e,t)=>{const u=U,c=S,p=R,f=A;return N(),$("div",B,[m(u,{title:e.$route.meta.title,placeholder:"",fixed:"","left-arrow":"",onClickLeft:t[0]||(t[0]=o=>e.$router.back())},null,8,["title"]),m(p,{loading:g.value,"onUpdate:loading":t[3]||(t[3]=o=>g.value=o),finished:y.value,onLoad:h,"finished-text":"没有更多了",offset:""},{default:O(()=>[m(c,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=o=>i.value=o),list:d.value,"default-tag-text":"默认",onAdd:t[2]||(t[2]=o=>e.$router.push({path:"/edit-address",query:{orderInfo:e.$route.query.orderInfo}})),onEdit:b,onSelect:x},null,8,["modelValue","list"])]),_:1},8,["loading","finished"]),m(f,{right:"20px",bottom:"60px"})])}}},Y=q(D,[["__scopeId","data-v-ff7665e6"]]);export{Y as default};
