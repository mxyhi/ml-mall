import{c as F,n as B,t as M,d as N,u as $,aL as _,$ as U,b as m,aj as q,w as D,X as O,b0 as G,av as E,E as T,C as H,b1 as K,l as L,af as R,aG as W,I as X,a5 as Y,f as x,o as J,a7 as Q,b2 as Z,r as ee,b3 as te,h as ne}from"./user-867e849d.js";import{L as oe}from"./index-ff8b65c0.js";const[ae,se]=F("form"),le={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:B,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:M,showErrorMessage:M,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var ie=N({name:ae,props:le,emits:["submit","failed"],setup(e,{emit:r,slots:s}){const{children:l,linkChildren:d}=$(_),u=t=>t?l.filter(n=>t.includes(n.name)):l,g=t=>new Promise((n,a)=>{const f=[];u(t).reduce((z,A)=>z.then(()=>{if(!f.length)return A.validate().then(I=>{I&&f.push(I)})}),Promise.resolve()).then(()=>{f.length?a(f):n()})}),b=t=>new Promise((n,a)=>{const f=u(t);Promise.all(f.map(c=>c.validate())).then(c=>{c=c.filter(Boolean),c.length?a(c):n()})}),h=t=>{const n=l.find(a=>a.name===t);return n?new Promise((a,f)=>{n.validate().then(c=>{c?f(c):a()})}):Promise.reject()},v=t=>typeof t=="string"?h(t):e.validateFirst?g(t):b(t),S=t=>{typeof t=="string"&&(t=[t]),u(t).forEach(a=>{a.resetValidation()})},i=()=>l.reduce((t,n)=>(t[n.name]=n.getValidationStatus(),t),{}),o=(t,n)=>{l.some(a=>a.name===t?(a.$el.scrollIntoView(n),!0):!1)},p=()=>l.reduce((t,n)=>(n.name!==void 0&&(t[n.name]=n.formValue.value),t),{}),w=()=>{const t=p();v().then(()=>r("submit",t)).catch(n=>{r("failed",{values:t,errors:n}),e.scrollToError&&n[0].name&&o(n[0].name)})},P=t=>{q(t),w()};return d({props:e}),U({submit:w,validate:v,getValues:p,scrollToField:o,resetValidation:S,getValidationStatus:i}),()=>{var t;return m("form",{class:se(),onSubmit:P},[(t=s.default)==null?void 0:t.call(s)])}}});const Ce=D(ie);let k=0;function re(e){e?(k||document.body.classList.add("van-toast--unclickable"),k++):k&&(k--,k||document.body.classList.remove("van-toast--unclickable"))}const[ce,y]=F("toast"),ue=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],de={icon:String,show:Boolean,type:O("text"),overlay:Boolean,message:B,iconSize:B,duration:G(2e3),position:O("middle"),teleport:[String,Object],wordBreak:String,className:E,iconPrefix:String,transition:O("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:E,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var fe=N({name:ce,props:de,emits:["update:show"],setup(e,{emit:r,slots:s}){let l,d=!1;const u=()=>{const i=e.show&&e.forbidClick;d!==i&&(d=i,re(d))},g=i=>r("update:show",i),b=()=>{e.closeOnClick&&g(!1)},h=()=>clearTimeout(l),v=()=>{const{icon:i,type:o,iconSize:p,iconPrefix:w,loadingType:P}=e;if(i||o==="success"||o==="fail")return m(X,{name:i||o,size:p,class:y("icon"),classPrefix:w},null);if(o==="loading")return m(oe,{class:y("loading"),size:p,type:P},null)},S=()=>{const{type:i,message:o}=e;if(s.message)return m("div",{class:y("text")},[s.message()]);if(Y(o)&&o!=="")return i==="html"?m("div",{key:0,class:y("text"),innerHTML:String(o)},null):m("div",{class:y("text")},[o])};return T(()=>[e.show,e.forbidClick],u),T(()=>[e.show,e.type,e.message,e.duration],()=>{h(),e.show&&e.duration>0&&(l=setTimeout(()=>{g(!1)},e.duration))}),H(u),K(u),()=>m(W,L({class:[y([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:b,onClosed:h,"onUpdate:show":g},R(e,ue)),{default:()=>[v(),S()]})}});const me={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let C=[],ge=!1,V=x({},me);const ve=new Map;function j(e){return J(e)?e:{message:e}}function he(){const{instance:e,unmount:r}=Z({setup(){const s=ee(""),{open:l,state:d,close:u,toggle:g}=te(),b=()=>{},h=()=>m(fe,L(d,{onClosed:b,"onUpdate:show":g}),null);return T(s,v=>{d.message=v}),ne().render=h,{open:l,close:u,message:s}}});return e}function ye(){if(!C.length||ge){const e=he();C.push(e)}return C[C.length-1]}function be(e={}){if(!Q)return{};const r=ye(),s=j(e);return r.open(x({},V,ve.get(s.type||V.type),s)),r}const pe=e=>r=>be(x({type:e},j(r))),Se=pe("success");export{Ce as F,be as a,Se as b,fe as s};
