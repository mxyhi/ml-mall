import{_ as L,z as q,r as s,at as k,Q as A,S,s as $,H as N,b as v,x as R}from"./user-29809695.js";import{L as U}from"./index-b43909d0.js";import"./index-ae5d72ae.js";import"./index-7103e571.js";import"./index-baad5075.js";import"./index-afe6215c.js";import{A as w}from"./index-f707c078.js";import{g as B}from"./address-d4a99458.js";import"./use-tab-status-29169c28.js";const D={class:"container"},O={__name:"index",setup(V){const _=q(),a=s(null);_.query.orderInfo&&(a.value=JSON.parse(decodeURI(atob(_.query.orderInfo||"")||"")||"{}")),console.log(a.value);let n=1;const l=10;let r=0;const I=k(),m=s([]),d=s([]),i=s(null),b=(e,t)=>{console.log(e),I.push({path:"/edit-address",query:{addressInfo:btoa(encodeURI(JSON.stringify({...m.value[t]}))),orderInfo:_.query.orderInfo}})},g=s(!1),y=s(!1),h=async()=>{var t,u,c,p,f;const e=await B({page:n++,limit:l});if(console.log(e),console.table(e.data.list),e.code===1&&(r=e.data.count,console.log(e.data.list===null),g.value=!1,e.data.list!==null&&(m.value.push(...e.data.list||[]),d.value.push(...((u=(t=e.data.list)==null?void 0:t.map)==null?void 0:u.call(t,o=>({id:o.id,name:o.name,tel:o.phone,address:o.province.concat(o.city,o.town,o.street!=="null"?o.street:"",o.detail),isDefault:!!o.is_default})))||[]),i.value=(f=(p=(c=d.value).find)==null?void 0:p.call(c,o=>o.isDefault))==null?void 0:f.id,console.table(m.value),console.table(d.value))),console.log(n,parseInt(r/l)+1,r,n,l),n>parseInt(r/l)+1){y.value=!0;return}},x=e=>{a.value&&(console.log(e),console.log(i.value),I.replace({name:"createOrder",query:{orderInfo:btoa(encodeURI(JSON.stringify({...a.value,consignee_name:e.name,consignee_phone:e.tel,consignee_address:e.address,isDefault:e.isDefault})))}}))};return(e,t)=>{const u=A,c=w,p=U,f=S;return $(),N("div",D,[v(u,{title:e.$route.meta.title,placeholder:"",fixed:"","left-arrow":"",onClickLeft:t[0]||(t[0]=o=>e.$router.back())},null,8,["title"]),v(p,{loading:g.value,"onUpdate:loading":t[3]||(t[3]=o=>g.value=o),finished:y.value,onLoad:h,"finished-text":"没有更多了",offset:""},{default:R(()=>[v(c,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=o=>i.value=o),list:d.value,"default-tag-text":"默认",onAdd:t[2]||(t[2]=o=>e.$router.push({path:"/edit-address",query:{orderInfo:e.$route.query.orderInfo}})),onEdit:b,onSelect:x},null,8,["modelValue","list"])]),_:1},8,["loading","finished"]),v(f,{right:"20px",bottom:"60px"})])}}},G=L(O,[["__scopeId","data-v-ff7665e6"]]);export{G as default};
