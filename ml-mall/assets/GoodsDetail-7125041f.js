import{c as h,t as T,d as x,r as B,u as E,a as d,w as S,e as k,h as $,i as y,T as q,n as L,ap as O,k as R,j as V,I as j,L as F,S as z,_ as K,v as M,y as Y,A as H,o as J,E as Q,ai as n,af as v,s as U,q as W,F as b,ag as X,ah as Z,ak as tt,b5 as ot}from"./user-0dd1e069.js";/* empty css              *//* empty css              */import{N as et}from"./index-17d6a68d.js";import{u as at,r as w,a as A}from"./use-route-f9688e52.js";import{B as nt}from"./index-c1d7c59c.js";const[N,I]=h("action-bar"),C=Symbol(N),st={placeholder:Boolean,safeAreaInsetBottom:T};var rt=x({name:N,props:st,setup(a,{slots:s}){const r=B(),i=at(r,I),{linkChildren:t}=E(C);t();const c=()=>{var p;return d("div",{ref:r,class:[I(),{"van-safe-area-bottom":a.safeAreaInsetBottom}]},[(p=s.default)==null?void 0:p.call(s)])};return()=>a.placeholder?i(c):c()}});const ct=S(rt),[lt,it]=h("action-bar-button"),dt=k({},w,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var ut=x({name:lt,props:dt,setup(a,{slots:s}){const r=A(),{parent:i,index:t}=$(C),c=y(()=>{if(i){const l=i.children[t.value-1];return!(l&&"isButton"in l)}}),p=y(()=>{if(i){const l=i.children[t.value+1];return!(l&&"isButton"in l)}});return q({isButton:!0}),()=>{const{type:l,icon:e,text:o,color:_,loading:u,disabled:f}=a;return d(nt,{class:it([l,{last:p.value,first:c.value}]),size:"large",type:l,icon:e,color:_,loading:u,disabled:f,onClick:r},{default:()=>[s.default?s.default():o]})}}});const pt=S(ut),[_t,m]=h("action-bar-icon"),vt=k({},w,{dot:Boolean,text:String,icon:String,color:String,badge:L,iconClass:O,badgeProps:Object,iconPrefix:String});var ft=x({name:_t,props:vt,setup(a,{slots:s}){const r=A();$(C);const i=()=>{const{dot:t,badge:c,icon:p,color:l,iconClass:e,badgeProps:o,iconPrefix:_}=a;return s.icon?d(V,R({dot:t,class:m("icon"),content:c},o),{default:s.icon}):d(j,{tag:"div",dot:t,name:p,badge:c,color:l,class:[m("icon"),e],badgeProps:o,classPrefix:_},null)};return()=>d("div",{role:"button",class:m(),tabindex:0,onClick:r},[i(),s.default?s.default():a.text])}});const gt=S(ft);const bt=a=>F({method:"POST",url:"/frontend/goods/detail".concat("?",z({id:a}))});const D=a=>(X("data-v-7fbdea84"),a=a(),Z(),a),mt={class:"container"},Bt={class:"body_box"},ht={class:"img_box"},xt=["src","alt"],St={class:"price"},Ct={class:"goods_name"},Pt={class:"brands"},yt={class:"express_prompt"},It=D(()=>n("span",null,"免邮费 顺丰快递",-1)),kt={class:"detail"},$t=D(()=>n("p",{class:"title"},"商品详情",-1)),wt={class:"content"},At={__name:"GoodsDetail",setup(a){const s=M(),r=Y(),i=s.params.goodsId,t=B({});H(async()=>{const e=await bt(i);t.value=e.data,console.table(t.value)});const c=B(!1),p=async e=>{c.value=!c.value,console.table(e),c.value?(console.log(),console.log("收藏")):console.log("取消收藏")},l=async e=>{var _;console.table(r.data);const o=(_=r.data)==null?void 0:_.find(u=>u.goods_id==e);if(console.table(o),o){const u=await tt({goods_id:e,count:o.count+1,id:o.id});console.table(u)}else{const u=await ot({goods_id:e,count:1});console.table(u)}r.changeCart()};return(e,o)=>{const _=et,u=gt,f=pt,G=ct;return J(),Q("main",null,[d(_,{title:e.$route.meta.title,"left-arrow":"",onClickLeft:o[0]||(o[0]=g=>e.$router.back()),fixed:"",placeholder:""},null,8,["title"]),n("div",mt,[n("div",Bt,[n("div",ht,[n("img",{src:t.value.pic_url,alt:t.value.pic_url},null,8,xt)]),n("p",St,"￥"+v(t.value.price),1),n("div",Ct,v(t.value.name),1),n("p",Pt,"品牌商："+v(t.value.brand),1),n("div",yt,[n("span",null,[U(" 库存："),n("span",null,v(t.value.stock),1)]),It]),n("div",kt,[$t,n("p",wt,v(t.value.detail_info),1)])])]),d(G,null,{default:W(()=>{var g;return[d(u,{badge:(g=b(r))!=null&&g.count?b(r).count:"",icon:"cart-o",text:"购物车",onClick:o[1]||(o[1]=P=>e.$router.push("/cart"))},null,8,["badge"]),d(u,{icon:c.value?"star":"star-o",text:"收藏",color:"#ff5000",onClick:o[2]||(o[2]=P=>p(t.value))},null,8,["icon"]),d(f,{type:"warning",text:"加入购物车",onClick:o[3]||(o[3]=P=>l(b(i)))}),d(f,{type:"danger",text:"立即购买"})]}),_:1})])}}},Lt=K(At,[["__scopeId","data-v-7fbdea84"]]);export{Lt as default};
