import{N as B,_ as $,bh as F,x as S,aq as U,r as m,C as q,j as A,I as E,aG as G,p as h,F as g,b as n,U as o,V as i,J as H,T as L,H as M,v as C,s as O,G as P,ar as R,as as z}from"./user-0aef1c91.js";import"./index-517c6840.js";import{F as J}from"./index-e62943ec.js";/* empty css              */import{N as K}from"./index-7f807b9d.js";import{a as w}from"./recommend-d84e1297.js";import{d as Q,a as W}from"./cattle-64c92af1.js";import{d as X,a as Y}from"./collection-b7020f52.js";import{I as Z}from"./index-edc94503.js";import"./use-route-dd9e823b.js";import"./use-id-90fe8789.js";const ee=l=>B({method:"POST",url:"/frontend/comment/add/",data:(()=>{const d=new FormData;return Object.keys(l).forEach(v=>{d.append(v,l[v])}),d})()});const x=l=>(R("data-v-6f2a1dd8"),l=l(),z(),l),oe={class:"container"},te={class:"content"},ae={class:"body"},se={class:"title"},le={class:"info"},ce={class:"desc"},ne={class:"created_time"},ie={class:"detail"},de={key:0,class:"comment"},re=x(()=>o("p",null,"评论:",-1)),ue={class:"content_item"},_e={class:"user_pic"},me=["src","alt"],ve={class:"item_left"},pe={class:"user_name"},fe={class:"createdTime"},he={class:"user_content"},ge={class:"action_box"},be={class:"action"},we=x(()=>o("div",null,"评论",-1)),ye={__name:"Detail",setup(l){F(a=>({"38f23eeb":P(k)}));const d=S(),v=U(),r=d.query.articleId;console.log(d.query),r||v.replace("/recommend");const e=m({}),y=async()=>{var t,f;if(!r)return;const a=await w(r);a.code===1&&(a.data.comments=(f=(t=a.data.comments)==null?void 0:t.reverse)==null?void 0:f.call(t),e.value=a.data),console.table(e.value),console.table(e.value.comments)};q(async()=>{await y(),u.value=e.value.is_praise,_.value=e.value.is_collect});const u=m(!1),I=async()=>{if(u.value){const t=await Q({type:2,object_id:e.value.id});console.log(t),console.log("😓")}else{const t=await W({type:2,object_id:e.value.id});console.log(t),console.log("👍")}const a=await w(r);console.log(a),e.value.praise=a.data.praise,u.value=e.value.is_praise=a.data.is_praise},_=m(!1),T=async()=>{if(_.value){const t=await X({type:2,object_id:e.value.id});console.log(t),console.log("💔")}else{const t=await Y({type:2,object_id:e.value.id});console.log(t),console.log("💖")}const a=await w(r);console.log(a),e.value.collect=a.data.collect,_.value=e.value.is_collect=a.data.is_collect},p=m(!1),c=m(""),k=A(()=>c.value.length>0?"#2ecc71":"#ccc"),V=async()=>{if(!c.value.length)return;console.log(c.value);const a=await ee({type:2,object_id:e.value.id,content:c.value});console.log(a),p.value=!1,c.value="",y()};return(a,t)=>{const f=K,D=Z,b=E,j=J,N=G;return h(),g("div",oe,[n(f,{title:a.$route.meta.title,placeholder:"",fixed:"","left-arrow":"",onClickLeft:t[0]||(t[0]=s=>a.$router.back())},null,8,["title"]),o("div",te,[n(D,{class:"img",fit:"cover",src:e.value.picUrl},null,8,["src"]),o("div",ae,[o("p",se,i(e.value.title),1),o("div",le,[o("p",ce,i(e.value.desc),1),o("p",ne,i(e.value.createdAt),1)]),o("div",ie,i(e.value.detail),1)])]),e.value.comments?(h(),g("div",de,[re,(h(!0),g(H,null,L(e.value.comments,s=>(h(),g("div",ue,[o("div",_e,[o("img",{src:s.user.avatar,alt:s.user.name},null,8,me)]),o("div",ve,[o("div",pe,[C(i(s.user.name)+" ",1),o("span",fe,i(s.created_at),1)]),o("div",he,i(s.content),1)])]))),256))])):M("",!0),o("div",ge,[o("div",{class:"add_comment",onClick:t[1]||(t[1]=s=>p.value=!0)},[n(b,{name:"edit",size:"20px"}),C(" 评论 ")]),o("div",be,[o("div",{class:"Thumbs_action",onClick:I},[n(b,{color:u.value?"#3498db":"#767676",name:`thumb-circle${u.value?"":"-o"}`,badge:e.value.praise||"","badge-props":{offset:["10px","5px"]}},null,8,["color","name","badge"])]),o("div",{class:"star_action",onClick:T},[n(b,{color:_.value?"#f39c12":"#767676",badge:e.value.collect||"",name:`star${_.value?"":"-o"}`,"badge-props":{offset:["10px","5px"]}},null,8,["color","badge","name"])])])]),n(N,{class:"comment_box","safe-area-inset-bottom":"",show:p.value,"onUpdate:show":t[3]||(t[3]=s=>p.value=s),position:"bottom"},{default:O(()=>[o("div",{class:"comment_header"},[we,o("div",{class:"left",onClick:V},"发布")]),n(j,{"label-align":"top",modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=s=>c.value=s),modelModifiers:{trim:!0},rows:"6",type:"textarea",maxlength:"200",placeholder:"请输入评论","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["show"])])}}},Fe=$(ye,[["__scopeId","data-v-6f2a1dd8"]]);export{Fe as default};
