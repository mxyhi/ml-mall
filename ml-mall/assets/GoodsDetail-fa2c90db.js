import{c as I,f as P,n as k,av as w,d as N,i as $,b as n,l as A,k as D,I as G,w as R,N as T,S as q,_ as O,x as V,aq as j,z as E,r as h,C as F,p as L,F as U,U as a,V as u,v as z,s as J,G as b,ar as K,as as M,au as Y,aA as H}from"./user-0aef1c91.js";/* empty css              *//* empty css              *//* empty css              */import{N as Q}from"./index-7f807b9d.js";import{a as W,d as X}from"./collection-b7020f52.js";import{A as Z,a as oo,b as to}from"./index-dc6fe435.js";import{r as eo,u as ao}from"./use-route-dd9e823b.js";import"./index-98a02491.js";import"./index-47ddee7f.js";const[so,x]=I("action-bar-icon"),no=P({},eo,{dot:Boolean,text:String,icon:String,color:String,badge:k,iconClass:w,badgeProps:Object,iconPrefix:String});var co=N({name:so,props:no,setup(s,{slots:i}){const v=ao();$(Z);const r=()=>{const{dot:d,badge:t,icon:l,color:g,iconClass:m,badgeProps:_,iconPrefix:e}=s;return i.icon?n(D,A({dot:d,class:x("icon"),content:t},_),{default:i.icon}):n(G,{tag:"div",dot:d,name:l,badge:t,color:g,class:[x("icon"),m],badgeProps:_,classPrefix:e},null)};return()=>n("div",{role:"button",class:x(),tabindex:0,onClick:v},[r(),i.default?i.default():s.text])}});const ro=R(co);const io=s=>T({method:"POST",url:"/frontend/goods/detail".concat("?",q({id:s}))});const S=s=>(K("data-v-d92549f1"),s=s(),M(),s),lo={class:"container"},uo={class:"body_box"},_o={class:"img_box"},po=["src","alt"],vo={class:"price"},go={class:"goods_name"},mo={class:"brands"},fo={class:"express_prompt"},bo=S(()=>a("span",null,"免邮费 顺丰快递",-1)),xo={class:"detail"},Co=S(()=>a("p",{class:"title"},"商品详情",-1)),yo={class:"content"},ho={__name:"GoodsDetail",setup(s){const i=V(),v=j(),r=E(),d=i.params.goodsId,t=h({});F(async()=>{const e=await io(d);t.value=e.data,console.table(t.value)});const l=h(!1),g=async e=>{if(l.value=!l.value,console.table(e),l.value){const o=await W({type:1,object_id:e.id});console.log(o),console.log("收藏")}else{const o=await X({type:1,object_id:e.id});console.log(o),console.log("取消收藏")}},m=async e=>{var p;console.table(r.data);const o=(p=r.data)==null?void 0:p.find(c=>c.goods_id==e);if(console.table(o),o){const c=await Y({goods_id:e,count:o.count+1,id:o.id});console.table(c)}else{const c=await H({goods_id:e,count:1});console.table(c)}r.changeCart()},_=()=>{v.push({name:"addressList",query:{orderInfo:btoa(encodeURI(JSON.stringify({goods:[{goods_id:t.value.id,count:1,goodsInfo:t.value}],price:t.value.price})))}})};return(e,o)=>{const p=Q,c=ro,C=oo,B=to;return L(),U("main",null,[n(p,{title:e.$route.meta.title,"left-arrow":"",onClickLeft:o[0]||(o[0]=f=>e.$router.back()),fixed:"",placeholder:""},null,8,["title"]),a("div",lo,[a("div",uo,[a("div",_o,[a("img",{src:t.value.pic_url,alt:t.value.pic_url},null,8,po)]),a("p",vo,"￥"+u((t.value.price/100).toFixed(2)),1),a("div",go,u(t.value.name),1),a("p",mo,"品牌商："+u(t.value.brand),1),a("div",fo,[a("span",null,[z(" 库存："),a("span",null,u(t.value.stock),1)]),bo]),a("div",xo,[Co,a("p",yo,u(t.value.detail_info),1)])])]),n(B,{placeholder:""},{default:J(()=>{var f;return[n(c,{badge:(f=b(r))!=null&&f.count?b(r).count:"",icon:"cart-o",text:"购物车",onClick:o[1]||(o[1]=y=>e.$router.push("/cart"))},null,8,["badge"]),n(c,{icon:l.value?"star":"star-o",text:"收藏",color:"#ff5000",onClick:o[2]||(o[2]=y=>g(t.value))},null,8,["icon"]),n(C,{type:"warning",text:"加入购物车",onClick:o[3]||(o[3]=y=>m(b(d)))}),n(C,{type:"danger",text:"立即购买",onClick:_})]}),_:1})])}}},Go=O(ho,[["__scopeId","data-v-d92549f1"]]);export{Go as default};
