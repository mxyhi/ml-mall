import{c as w,f as P,n as k,av as N,d as $,i as A,b as n,l as D,k as G,I as R,w as T,N as q,S as O,_ as V,x as j,aq as E,z as F,r as h,C as L,p as U,F as z,U as a,V as _,v as J,s as K,G as f,ar as M,as as Y,au as H,aA as Q}from"./user-867e849d.js";/* empty css              *//* empty css              *//* empty css              */import{N as W}from"./index-9c0250d6.js";import{d as X,a as Z}from"./collection-b0fc5782.js";import{A as oo,a as to,b as eo}from"./index-27e30fa6.js";import{r as ao,u as so}from"./use-route-473dc515.js";import"./index-3e4e1c85.js";import"./index-ff8b65c0.js";const[no,x]=w("action-bar-icon"),co=P({},ao,{dot:Boolean,text:String,icon:String,color:String,badge:k,iconClass:N,badgeProps:Object,iconPrefix:String});var ro=$({name:no,props:co,setup(s,{slots:l}){const v=so();A(oo);const i=()=>{const{dot:d,badge:o,icon:u,color:g,iconClass:m,badgeProps:p,iconPrefix:t}=s;return l.icon?n(G,D({dot:d,class:x("icon"),content:o},p),{default:l.icon}):n(R,{tag:"div",dot:d,name:u,badge:o,color:g,class:[x("icon"),m],badgeProps:p,classPrefix:t},null)};return()=>n("div",{role:"button",class:x(),tabindex:0,onClick:v},[i(),l.default?l.default():s.text])}});const io=T(ro);const S=s=>q({method:"POST",url:"/frontend/goods/detail".concat("?",O({id:s}))});const B=s=>(M("data-v-8c0b4059"),s=s(),Y(),s),lo={class:"container"},uo={class:"body_box"},_o={class:"img_box"},po=["src","alt"],vo={class:"price"},go={class:"goods_name"},mo={class:"brands"},bo={class:"express_prompt"},fo=B(()=>a("span",null,"免邮费 顺丰快递",-1)),xo={class:"detail"},Co=B(()=>a("p",{class:"title"},"商品详情",-1)),yo={class:"content"},ho={__name:"GoodsDetail",setup(s){const l=j(),v=E(),i=F(),d=l.params.goodsId,o=h({});L(async()=>{const t=await S(d);o.value=t.data,console.table(o.value),u.value=o.value.is_collect});const u=h(!1),g=async t=>{if(console.table(t),u.value){const c=await X({type:1,object_id:t.id});console.log(c),console.log("💔")}else{const c=await Z({type:1,object_id:t.id});console.log(c),console.log("💖")}const e=await S(d);o.value=e.data,u.value=o.value.is_collect},m=async t=>{var c;console.table(i.data);const e=(c=i.data)==null?void 0:c.find(r=>r.goods_id==t);if(console.table(e),e){const r=await H({goods_id:t,count:e.count+1,id:e.id});console.table(r)}else{const r=await Q({goods_id:t,count:1});console.table(r)}i.changeCart()},p=()=>{v.push({name:"addressList",query:{orderInfo:btoa(encodeURI(JSON.stringify({goods:[{goods_id:o.value.id,count:1,goodsInfo:o.value}],price:o.value.price})))}})};return(t,e)=>{const c=W,r=io,C=to,I=eo;return U(),z("main",null,[n(c,{title:t.$route.meta.title,"left-arrow":"",onClickLeft:e[0]||(e[0]=b=>t.$router.back()),fixed:"",placeholder:""},null,8,["title"]),a("div",lo,[a("div",uo,[a("div",_o,[a("img",{src:o.value.pic_url,alt:o.value.pic_url},null,8,po)]),a("p",vo,"￥"+_((o.value.price/100).toFixed(2)),1),a("div",go,_(o.value.name),1),a("p",mo,"品牌商："+_(o.value.brand),1),a("div",bo,[a("span",null,[J(" 库存："),a("span",null,_(o.value.stock),1)]),fo]),a("div",xo,[Co,a("p",yo,_(o.value.detail_info),1)])])]),n(I,{placeholder:""},{default:K(()=>{var b;return[n(r,{badge:(b=f(i))!=null&&b.count?f(i).count:"",icon:"cart-o",text:"购物车",onClick:e[1]||(e[1]=y=>t.$router.push("/cart"))},null,8,["badge"]),n(r,{icon:u.value?"star":"star-o",text:"收藏",color:"#ff5000",onClick:e[2]||(e[2]=y=>g(o.value))},null,8,["icon"]),n(C,{type:"warning",text:"加入购物车",onClick:e[3]||(e[3]=y=>m(f(d)))}),n(C,{type:"danger",text:"立即购买",onClick:p})]}),_:1})])}}},Go=V(ho,[["__scopeId","data-v-8c0b4059"]]);export{Go as default};
